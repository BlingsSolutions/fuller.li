<!DOCTYPE html>
<html lang="en">
<head>
  <title>Kyle Fuller - misc</title>
  <meta charset="utf-8" />

  <link rel="stylesheet" href="https://f.fontdeck.com/s/css/YbEbVONS3yZB1DYf9YVHgZSgeMA/kylefuller.co.uk/14510.css" type="text/css" />
  <link rel="stylesheet" href="http://kylefuller.co.uk/theme/css/master.css" type="text/css" />
  <link rel="stylesheet" href="http://kylefuller.co.uk/theme/css/pygment.css" type="text/css" />

  <link href="http://kylefuller.co.uk/" type="application/atom+xml" rel="alternate" title="Kyle Fuller ATOM Feed" />

      <link href="http://kylefuller.co.uk/posts/feed/latest" type="application/atom+xml" rel="alternate" title="Kyle Fuller RSS Feed" />
  
  <link href="https://kylef.tent.is/" rel="https://tent.io/rels/profile" />

  <link rel="openid.server" href="http://openid.yubico.com/server.php" />
  <link rel="openid.delegate" href="http://openid.yubico.com/server.php/idpage?user=cccccccbndrr" />
</head>

<body id="">
  <section>
          <article>
      <div class="date">Wed 28 March 2012</div>

      <h1><a href="http://kylefuller.co.uk/posts/organising-dotfiles-in-a-git-repository/" rel="bookmark" title="Permalink to Organising dotfiles in a git repository">Organising dotfiles in a git repository</a></h1>

      <div class="entry-content">
        <p>Organising dotfiles can be done in numerous ways. Many dotfile repositories
often have their own clunky script to copy or symbolically link their dotfiles
in place. I feel this is a dirty approach and I prefer my files to be easily
manageable via the git command. I don't want to have to copy a file every time
I change it.</p>
<img alt="/static/images/dotfiles.png" class="align-center" src="/static/images/dotfiles.png" style="width: 589px; height: 276px;" />
<p>Another approach I have seen done, is making your whole home directory a git
repository. Unfortunately after using this solution you will come across a
number of flaws, any repository in your home directory will now follow your
<cite>~/.gitignore</cite>. I also came into many problems when I was using Xcode which
will try to git add projects into your dotfiles repository. Like symbolic
linking all my dotfiles into place, this solution also felt clunky.</p>
<p>Git allows you to seperate the work tree and the git dir via environment
variables or arguments to the git command. This allows us to store the bare git
dir in <cite>~/.files.git</cite> while still keeping our entire home directory as the work
tree for git.</p>
<p>I settled for using a simple alias in my <cite>.zshrc</cite> which allows me to easily use
git to manage my dotfiles. But, it is imporant to remember that the home
directory will not be seen as a git repository unless you use this alias. You
won't be able to accidentally use git commands thinking you were in another
repo, (or accidentally git add a bunch of things in a mercurial repository).</p>
<p>Here is the alias I use:</p>
<div class="highlight"><pre><span class="nv">$ </span><span class="nb">alias </span><span class="nv">home</span><span class="o">=</span>git --work-tree<span class="o">=</span><span class="nv">$HOME</span> --git-dir<span class="o">=</span><span class="nv">$HOME</span>/.files.git
</pre></div>
<p>You can use this alias just as you would use the normal git command, this
allows you to clone and init a repo. To clone a dotfiles repo, you can do:</p>
<div class="highlight"><pre><span class="nv">$ </span>home clone git://github.com/kylef/dotfiles.git
</pre></div>

      </div>
    </article>
      <article>
      <div class="date">Sun 18 March 2012</div>

      <h1><a href="http://kylefuller.co.uk/posts/website-20/" rel="bookmark" title="Permalink to Website 2.0">Website 2.0</a></h1>

      <div class="entry-content">
        <p>It's taken me nearly a year to finish my new website. I have gone through many
iterations and have finally stuck with this theme and system.</p>
<p>Instead of running my own custom Django blog, this site is now powered by
<a class="reference external" href="http://pelican.notmyidea.org/">Pelican</a>, a static site generator. I have
created numerous patches for Pelican so that it works with custom URL
structures, so none of my URL's break when I migrated to Pelican.</p>
<div class="section" id="but-this-isn-t-your-second-revision-of-the-site">
<h2>But this isn't your second revision of the site?</h2>
<p>Ok you got me, this isn't really my second version of this site. I don't know
how many revisions I have gone through, but this is the second revision to have
the same content and posts. It's my second major release of the site in a
version control system. I use a git repository for the current site which can
be found on github <a class="reference external" href="https://github.com/kylef/kylefuller.co.uk">here</a>.</p>
</div>
<div class="section" id="what-is-new">
<h2>What is new?</h2>
<p>The theme for the website is completely different, I have made a new <a class="reference external" href="/about/">about
page</a>. I have lost all the comments from my old site, there was far
too much spam to port them over.</p>
<img alt="/static/images/website-20.png" src="/static/images/website-20.png" />
</div>

      </div>
    </article>
      <article>
      <div class="date">Sat 13 August 2011</div>

      <h1><a href="http://kylefuller.co.uk/posts/monitoring-inspircd-mrtg/" rel="bookmark" title="Permalink to Monitoring InspIRCd with MRTG">Monitoring InspIRCd with MRTG</a></h1>

      <div class="entry-content">
        <p>This guide will show you how to configure MRTG to show statistics from an
InspIRCd IRC server, this will include user counts and channel counts. This
guide assumes you already have InspIRCd and MRTG setup and working. You can see
an example of this working at <a href="http://hydra.sector5d.org/">Sector 5D</a>.</p>
<h3>InspIRCd config</h3>
<p>First, you will need to configure InspIRCd to use the <code>m_http</code> and
<code>m_http_stats</code> module. I configure InspIRCd to listen on localhost and port
8081 with SSL, but you could pick any port you want, just remember to change
the <code>$address</code> variable inside <code>inspircd-stats.sh</code> later.</p>
<p>Note, the following config is for InspIRCd 2.0, if you use a older version you
may need to change the bind line to a http line, please see the InspIRCd wiki
for using a older version.</p>
<div class="codehilite"><pre><span class="nt">&lt;module</span> <span class="na">name=</span><span class="s">&quot;m_httpd.so&quot;</span><span class="nt">&gt;</span>
<span class="nt">&lt;module</span> <span class="na">name=</span><span class="s">&quot;m_httpd_stats.so&quot;</span><span class="nt">&gt;</span>
<span class="nt">&lt;bind</span> <span class="na">address=</span><span class="s">&quot;localhost&quot;</span> <span class="na">port=</span><span class="s">&quot;8081&quot;</span> <span class="na">type=</span><span class="s">&quot;httpd&quot;</span> <span class="na">ssl=</span><span class="s">&quot;gnutls&quot;</span><span class="nt">&gt;</span>
</pre></div>


<p>Once you have placed this in your InspIRCd config, you can rehash or reload
InspIRCd and then you will be able to connect to it over http(s) to retrive
stats. Such as at https://localhost:8081/stats</p>
<h4>Creating a script to gather the user or channel count on InspIRCd</h4>
<p>The following script queries the InspIRCd <code>m_httpd_stats</code> module for the user
or channel count. This depends on <a href="http://xmlstar.sourceforge.net/">XMLStarlet</a>
(<a href="http://packages.debian.org/search?keywords=xmlstarlet">Debian package</a>, <a href="https://aur.archlinux.org/packages.php?ID=20101">Arch
AUR Package</a>), so please
install this first.</p>
<div class="codehilite"><pre><span class="c">#!/bin/sh</span>

<span class="nv">address</span><span class="o">=</span><span class="s2">&quot;https://localhost:8081/stats&quot;</span>
<span class="nv">count_type</span><span class="o">=</span><span class="nv">$1</span>

<span class="k">if</span> <span class="o">[[</span> <span class="s2">&quot;$count_type&quot;</span> !<span class="o">=</span> <span class="s2">&quot;user&quot;</span>  <span class="o">&amp;&amp;</span> <span class="s2">&quot;$count_type&quot;</span> !<span class="o">=</span> <span class="s2">&quot;channel&quot;</span> <span class="o">]]</span>; <span class="k">then</span>
<span class="k">  </span><span class="nb">echo</span> <span class="s2">&quot;Usage: $0 &lt;user|channel&gt;&quot;</span>
  <span class="nb">exit </span>1
<span class="k">elif</span>

<span class="nv">count</span><span class="o">=</span><span class="k">$(</span>wget -q -Y off -O - --no-check-certificate <span class="nv">$address</span> | xml sel -t -v <span class="s2">&quot;inspircdstats/general/${count_type}count&quot;</span><span class="k">)</span>

<span class="nb">echo</span> <span class="nv">$count</span>
<span class="nb">echo</span> <span class="nv">$count</span>
<span class="nb">echo</span> <span class="s2">&quot;IRC $count_type&quot;</span>
</pre></div>


<p>This script will need to be available from the user which you run MRTG as. I
have placed mine in <code>/usr/local/bin/inspircd-stats.sh</code> but you could place it
somewhere like <code>$HOME/bin/inspircd-stats.sh</code>.</p>
<p>To download and install this to /usr/local/bin run the following:</p>
<div class="codehilite"><pre>sudo mkdir -p /usr/local/bin
sudo wget https://raw.github.com/gist/1042604/b19a4cfd91b6956063d962c977f3d5f8e3318d7d/inspircd-stats.sh -O /usr/local/bin/inspircd-stats.sh
sudo chmod+x /usr/local/bin/inspircd-stats.sh
</pre></div>


<p>Now you have this <code>inspircd-stats.sh</code> script, you can use it to get the user
and channel count as follows:</p>
<div class="codehilite"><pre>/usr/local/bin/inspircd-stats.sh user
/usr/local/bin/inspircd-stats.sh channel
</pre></div>


<h3>MRTG Config</h3>
<p>You will need to add the following to your mrtg config file, this could be
located at <code>/etc/mrtg.cfg</code>, but this depends on how you setup mrtg.</p>
<div class="codehilite"><pre><span class="c"># For IRC Users:</span>
<span class="n">Target</span><span class="p">[</span><span class="n">irc</span><span class="p">.</span><span class="n">users</span><span class="p">]:</span> `<span class="o">/</span><span class="n">usr</span><span class="o">/</span><span class="n">local</span><span class="o">/</span><span class="n">bin</span><span class="o">/</span><span class="n">inspircd</span><span class="o">-</span><span class="n">stats</span><span class="p">.</span><span class="n">sh</span> <span class="n">user</span>`
<span class="n">Title</span><span class="p">[</span><span class="n">irc</span><span class="p">.</span><span class="n">users</span><span class="p">]:</span> <span class="n">IRC</span> <span class="n">Users</span>
<span class="n">PageTop</span><span class="p">[</span><span class="n">irc</span><span class="p">.</span><span class="n">users</span><span class="p">]:</span> <span class="o">&lt;</span><span class="n">h1</span><span class="o">&gt;</span><span class="n">IRC</span> <span class="n">Users</span><span class="o">&lt;/</span><span class="n">h1</span><span class="o">&gt;</span>
<span class="n">MaxBytes</span><span class="p">[</span><span class="n">irc</span><span class="p">.</span><span class="n">users</span><span class="p">]:</span> 10000000000
<span class="n">ShortLegend</span><span class="p">[</span><span class="n">irc</span><span class="p">.</span><span class="n">users</span><span class="p">]:</span> <span class="n">users</span>
<span class="n">YLegend</span><span class="p">[</span><span class="n">irc</span><span class="p">.</span><span class="n">users</span><span class="p">]:</span> <span class="n">Users</span>
<span class="n">LegendI</span><span class="p">[</span><span class="n">irc</span><span class="p">.</span><span class="n">users</span><span class="p">]:</span> <span class="n">Users</span>
<span class="n">LegendO</span><span class="p">[</span><span class="n">irc</span><span class="p">.</span><span class="n">users</span><span class="p">]:</span>
<span class="n">Legend1</span><span class="p">[</span><span class="n">irc</span><span class="p">.</span><span class="n">users</span><span class="p">]:</span> <span class="n">Users</span>
<span class="n">Legend2</span><span class="p">[</span><span class="n">irc</span><span class="p">.</span><span class="n">users</span><span class="p">]:</span>
<span class="n">Options</span><span class="p">[</span><span class="n">irc</span><span class="p">.</span><span class="n">users</span><span class="p">]:</span> <span class="n">growright</span><span class="p">,</span><span class="n">nopercent</span><span class="p">,</span><span class="n">gauge</span>

<span class="c"># For IRC Channels:</span>
<span class="n">Target</span><span class="p">[</span><span class="n">irc</span><span class="p">.</span><span class="n">channels</span><span class="p">]:</span> `<span class="o">/</span><span class="n">usr</span><span class="o">/</span><span class="n">local</span><span class="o">/</span><span class="n">bin</span><span class="o">/</span><span class="n">inspircd</span><span class="o">-</span><span class="n">stats</span><span class="p">.</span><span class="n">sh</span> <span class="n">channel</span>`
<span class="n">Title</span><span class="p">[</span><span class="n">irc</span><span class="p">.</span><span class="n">channels</span><span class="p">]:</span> <span class="n">IRC</span> <span class="n">Channels</span>
<span class="n">PageTop</span><span class="p">[</span><span class="n">irc</span><span class="p">.</span><span class="n">channels</span><span class="p">]:</span> <span class="o">&lt;</span><span class="n">h1</span><span class="o">&gt;</span><span class="n">IRC</span> <span class="n">Channels</span><span class="o">&lt;/</span><span class="n">h1</span><span class="o">&gt;</span>
<span class="n">MaxBytes</span><span class="p">[</span><span class="n">irc</span><span class="p">.</span><span class="n">channels</span><span class="p">]:</span> 10000000000
<span class="n">ShortLegend</span><span class="p">[</span><span class="n">irc</span><span class="p">.</span><span class="n">channels</span><span class="p">]:</span> <span class="n">channels</span>
<span class="n">YLegend</span><span class="p">[</span><span class="n">irc</span><span class="p">.</span><span class="n">channels</span><span class="p">]:</span> <span class="n">Channels</span>
<span class="n">LegendI</span><span class="p">[</span><span class="n">irc</span><span class="p">.</span><span class="n">channels</span><span class="p">]:</span> <span class="n">Channels</span>
<span class="n">LegendO</span><span class="p">[</span><span class="n">irc</span><span class="p">.</span><span class="n">channels</span><span class="p">]:</span>
<span class="n">Legend1</span><span class="p">[</span><span class="n">irc</span><span class="p">.</span><span class="n">channels</span><span class="p">]:</span> <span class="n">Channels</span>
<span class="n">Legend2</span><span class="p">[</span><span class="n">irc</span><span class="p">.</span><span class="n">channels</span><span class="p">]:</span>
<span class="n">Options</span><span class="p">[</span><span class="n">irc</span><span class="p">.</span><span class="n">channels</span><span class="p">]:</span> <span class="n">growright</span><span class="p">,</span><span class="n">nopercent</span><span class="p">,</span><span class="n">gauge</span>
</pre></div>


<p>Now, you can run your MRTG command for your config or wait for the MRTG cron
and it should show up your InspIRCd stats.</p>
      </div>
    </article>
      <article>
      <div class="date">Tue 24 February 2009</div>

      <h1><a href="http://kylefuller.co.uk/posts/how-install-irssi-dreamhost/" rel="bookmark" title="Permalink to How to install irssi on Dreamhost">How to install irssi on Dreamhost</a></h1>

      <div class="entry-content">
        <p>This was a useful guide I wrote back on my old website. I was trying to install irssi, and I couldn't remember how I installed it last time. Luckily it was available on archive.org's <a href="http://www.archive.org/web/web.php">WayBackMachine</a>. I have updated this guide to glib-2.19.8 and irssi-0.8.15.</p>
<p>To install irssi, you can eigher follow the next 7 steps and install from source.</p>
<p>Every command on this page should be entered into a SSH Prompt on DreamHost</p>
<h3>SSH into your Dreamhost server (for me, this is titan.dreamhost.com, you can find your server inside <a href="https://panel.dreamhost.com/">panel</a>)</h3>
<h3>Create the necessary directories:</h3>
<div class="codehilite"><pre>mkdir -p bin lib tmp
chmod 700 bin lib tmp
</pre></div>


<h3>Adding lines to your ~/.bash_profile</h3>
<div class="codehilite"><pre><span class="nb">echo</span> <span class="s2">&quot;export PATH=$PATH:$HOME/bin&quot;</span> &gt;&gt; ~/.bash_profile
<span class="nb">echo</span> <span class="s2">&quot;export PKG_CONFIG_PATH=$HOME/lib/pkgconfig&quot;</span> &gt;&gt; ~/.bash_profile
<span class="nb">echo</span> <span class="s2">&quot;export LD_LIBRARY_PATH=$HOME/lib:/usr/local/lib:$LD_LIBRARY_PATH&quot;</span> &gt;&gt; ~/.bash_profile
</pre></div>


<h3>Activate the new changes</h3>
<div class="codehilite"><pre><span class="nb">source</span> ~/.bash_profile
</pre></div>


<h3>Download, untar, and install glib</h3>
<div class="codehilite"><pre><span class="nb">cd</span> ~/tmp
wget ftp://ftp.gtk.org/pub/glib/2.19/glib-2.19.8.tar.gz
tar -xvzf glib-2.19.8.tar.gz
<span class="nb">cd </span>glib-2.19.8
./configure --prefix<span class="o">=</span><span class="nv">$HOME</span>
make
make install
</pre></div>


<h3>Download and install irssi</h3>
<div class="codehilite"><pre><span class="nb">cd</span> ~/tmp
wget http://irssi.org/files/irssi-0.8.15.tar.gz
tar -xvvzf irssi-0.8.15.tar.gz
<span class="nb">cd </span>irssi-0.8.15
./configure --prefix<span class="o">=</span><span class="nv">$HOME</span>
make
make install
</pre></div>


<h3>Clean up</h3>
<div class="codehilite"><pre>rm -rf ~/tmp/glib-2.19.8.tar.gz ~/tmp/glib-2.19.8 ~/tmp/irssi-0.8.15.tar.gz ~/tmp/irssi-0.8.15
</pre></div>


<p>Once you have installed it, simply type <code>irssi</code> to run it.</p>
<p>I asked Dreamhost if they would allow the use of a terminal application running
all the time. Here is their response:</p>
<blockquote>
<p>You won’t be in “trouble” for running an irc program (no servers) on our
servers. However if the system becomes unstable, it would likely be one of
the first processes killed by our admins as our servers are meant for hosting
web pages only. In general , we just don’t want users running bots or their
own server daemons on our servers.”</p>
</blockquote>
      </div>
    </article>
      <article>
      <div class="date">Mon 23 February 2009</div>

      <h1><a href="http://kylefuller.co.uk/posts/hello-welcome/" rel="bookmark" title="Permalink to Hello, and welcome">Hello, and welcome</a></h1>

      <div class="entry-content">
        <p>Hello and welcome to my new website. Its been a long time since I have had a
fully working website, this time I hope to maintain and update this regularly.</p>
<p>The design is heavily inspired by <a href="http://www.playgroundblues.com/">Nathan
Borrow</a>, ever since I first saw his website, I
loved how simple and white it looked. I have tried to make my website quite
different, but it always goes back to a similar look and feel that <a href="http://www.playgroundblues.com/">Nathan
Borrow</a> has on his site.</p>
<h3>What can you find here?</h3>
<p>On my website you can find various projects I am working on such as:
<a href="https://github.com/kylef/pyppp">PyPPP</a>. I am also working on
<a href="https://github.com/kylef/lithium">lithium</a> which is the batteries that wern't
included in Django, it is a suite of applications for writing a Django website,
it includes a blog, a forum, and many other useful applications.</p>
<p>The blog on my website is mainly as a home to post updates and notifications
based on the projects I am working on, I will also post anything interesting I
find in Python or Django.</p>
      </div>
    </article>
  
  <div class="pagination">
    
      </div>
  </section>

  <aside id="sidebar">
    <h1>Kyle Fuller</h1>

    <p>I’m <span>Kyle Fuller</span> and I’m a programmer residing in England. You can find me as <span><a href="http://twitter.com/kylefuller">@kylefuller</a></span> on Twitter, or <span><a href="https://github.com/kylef">@kylef</a></span> on Github.</p>


    <h4>Some projects I am involved with include:</h4>
    <ul>
              <li><a href="http://znc.in/">ZNC</a> — An IRC bouncer with modules & scripts support.</li>
              <li><a href="http://textualapp.com/">Textual</a> — Textual is a lightweight IRC client created specifically for Mac OS X.</li>
              <li><a href="https://github.com/kylef/zokket">zokket</a> — An asynchronous socket networking library for python</li>
              <li><a href="http://readthedocs.org/docs/pyppp/en/latest/">PyPPP</a> — A python implementation of Perfect Paper Passwords a single-use passcode system for multifactor authentication.</li>
              <li><a href="http://readthedocs.org/docs/lithium/en/latest/">lithium</a> — A set of applications for writing a Django website's, it includes a blog, a wiki, and many other useful applications.</li>
              <li><a href="https://github.com/kylef/rivr">rivr</a> — A python micro web-framework</li>
          </ul>

    <h4>Recent Articles</h4>
    <ul>
                        <li>
            <a href="http://kylefuller.co.uk/posts/hello-welcome/" rel="bookmark"title="Permalink to Hello, and welcome">Hello, and welcome</a>
          </li>
                                <li>
            <a href="http://kylefuller.co.uk/posts/how-install-irssi-dreamhost/" rel="bookmark"title="Permalink to How to install irssi on Dreamhost">How to install irssi on Dreamhost</a>
          </li>
                                <li>
            <a href="http://kylefuller.co.uk/posts/monitoring-inspircd-mrtg/" rel="bookmark"title="Permalink to Monitoring InspIRCd with MRTG">Monitoring InspIRCd with MRTG</a>
          </li>
                                <li>
            <a href="http://kylefuller.co.uk/posts/website-20/" rel="bookmark"title="Permalink to Website 2.0">Website 2.0</a>
          </li>
                                <li>
            <a href="http://kylefuller.co.uk/posts/organising-dotfiles-in-a-git-repository/" rel="bookmark"title="Permalink to Organising dotfiles in a git repository">Organising dotfiles in a git repository</a>
          </li>
                  </ul>
  </aside>


</body>
</html>